name: ðŸš€ Deploy to Production

on: 
  push: 
    branches:
      - master

jobs: 
  build:
    name: ðŸ“‚ Build artifact  
    runs-on: ubuntu-latest
    steps: 
      - name: Checkout 
        uses: actions/checkout@v2

        name: Installing dependencies
        run: npm ci

      - name: ðŸšš Build project
        run: npm run build
      
      - name: ðŸ“‚ Creating deployment artifact
        env: 
          GITHUB_SHA: ${{  github.sha  }}
        run: tar -czf build.tgz "${GITHUB_SHA}".tar.gz build/
      
      - name: ðŸ“‚ Storing artifact
        uses: actions/upload-artifact@v2
        with: 
          name: app-build
          path: ${{ github.sha }}.tar.gz